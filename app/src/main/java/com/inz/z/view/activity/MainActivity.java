package com.inz.z.view.activity;import android.content.Intent;import androidx.databinding.DataBindingUtil;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import com.google.android.material.navigation.NavigationView;import androidx.drawerlayout.widget.DrawerLayout;import androidx.appcompat.app.ActionBarDrawerToggle;import androidx.appcompat.widget.Toolbar;import android.graphics.Color;import android.os.Build;import android.view.KeyEvent;import android.view.MenuItem;import android.view.View;import android.view.Window;import android.view.WindowManager;import android.widget.Toast;import com.alibaba.android.arouter.launcher.ARouter;import com.inz.choosefile.view.ImageChooseFragment;import com.inz.z.R;import com.inz.z.databinding.ActivityMainBinding;import com.inz.z.databinding.IncludeToolbarBinding;import com.inz.z.databinding.NavigationHeaderBinding;import com.inz.z.view.fragment.AbsBackHandledFragment;import com.inz.z.view.fragment.AbsBaseFragment;import com.inz.z.view.fragment.ExampleFragment;import com.inz.z.view.fragment.MyPlanFragment;import de.hdodenhof.circleimageview.CircleImageView;/** * 主界面 * Create by 116546 * * @author Zhenglj */public class MainActivity extends AbsBaseActivity {    private DrawerLayout mDrawerLayout;    private ActionBarDrawerToggle mDrawerToggle;    private Toolbar mToolbar;    // 抽象类 选中的 框架    private AbsBackHandledFragment selectFragment;    private NavigationView mNavigationView;    private ActivityMainBinding activityMainBinding;    // 工具栏 动画 时间    private static final int ANIM_DURATION_TOOLBAR = 300;    @Override    protected void initWindow() {//        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);        getWindow().addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION);        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);        int uiOpts =                View.SYSTEM_UI_FLAG_LAYOUT_STABLE //  SystemUiFlags.LayoutStable//               | View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR//                | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION // SystemUiFlags.LayoutHideNavigation                | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN // SystemUiFlags.LayoutFullscreen//                | View.SYSTEM_UI_FLAG_FULLSCREEN // SystemUiFlags.Fullscreen//                | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION // SystemUiFlags.HideNavigation//                | View.SYSTEM_UI_FLAG_VISIBLE//                | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY; // SystemUiFlags.ImmersiveSticky;                ;//        getWindow().getDecorView().setSystemUiVisibility(uiOpts);        getWindow().setStatusBarColor(Color.TRANSPARENT);//        getWindow().set        WindowManager.LayoutParams params = getWindow().getAttributes();        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {            params.layoutInDisplayCutoutMode = WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_DEFAULT;        }        getWindow().setAttributes(params);        requestWindowFeature(Window.FEATURE_ACTION_BAR);        getWindow().setFeatureInt(Window.FEATURE_ACTION_BAR, Window.FEATURE_ACTION_BAR_OVERLAY);    }    @Override    protected int getContentViewId() {        return R.layout.activity_main;    }    /**     * 初始化 视图     */    @Override    public void initView() {        activityMainBinding = DataBindingUtil.setContentView(this, R.layout.activity_main);        IncludeToolbarBinding includeToolbarBinding = activityMainBinding.mainIncludeToolbar;        mToolbar = includeToolbarBinding.toolbar;        setSupportActionBar(mToolbar);        mDrawerLayout = activityMainBinding.mainDrawerLayout;        mDrawerToggle = new ActionBarDrawerToggle(this, mDrawerLayout, mToolbar, R.string.drawer_open, R.string.drawer_close);        mDrawerToggle.syncState();        mDrawerLayout.addDrawerListener(mDrawerToggle);        mNavigationView = activityMainBinding.mainNv;        setupDrawerContent(mNavigationView);    }    @Override    public void initData() {        requestPermission();        checkUpdate();    }    @Override    public boolean myOnKeyDown(int keyCode, KeyEvent event) {        return false;    }    /**     * 设置 导航头     */    private void setNavHeader() {//        View headerView = mNavigationView.findViewById(R.id.nav_header_user_name_tv);        NavigationHeaderBinding navigationHeaderBinding = DataBindingUtil.bind(mNavigationView.getHeaderView(0));        if (navigationHeaderBinding != null) {            CircleImageView circleImageView = navigationHeaderBinding.navHeaderPhotoCiv;            circleImageView.setOnClickListener(new View.OnClickListener() {                @Override                public void onClick(View v) {                }            });        }    }    private ExampleFragment exampleFragment;    private MyPlanFragment myPlanFragment;    /**     * 设置 点击 NavigationView 中的 Item 切换 DrawerLayout 中 内容     *     * @param navigationView 导航视图     */    private void setupDrawerContent(NavigationView navigationView) {        navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {            @Override            public boolean onNavigationItemSelected(@NonNull MenuItem item) {                switch (item.getItemId()) {                    case R.id.navigation_item_home:                        Toast.makeText(mContext, "提示", Toast.LENGTH_SHORT).show();//                        getSupportFragmentManager().beginTransaction().replace(R.id.main_fragment, new ImageChooseFragment()).commit();//                        ARouter.getInstance().build("/fileChoose/vop").navigation();                        ARouter.getInstance().build("/fileChoose/bottom_sheet").navigation();                        break;                    case R.id.navigation_item_example:                        if (exampleFragment == null) {                            exampleFragment = new ExampleFragment();                        }                        switchToFragment(exampleFragment, "ExampleFragment");                        break;                    case R.id.navigation_item_person_center://                        ARouter.getInstance().build("/face/one").navigation();//                        ARouter.getInstance().build("/camera/base_camera").navigation();//                        ARouter.getInstance().build("/base/MainActivity").navigation();                        ARouter.getInstance().build("/other/finger").navigation();                        break;                    case R.id.navigation_item_my_plan:                        ARouter.getInstance().build("/face/cameraSurface").navigation();//                        if (myPlanFragment == null) {//                            myPlanFragment = new MyPlanFragment();//                        }//                        switchToFragment(myPlanFragment, "MyPlanFragment");                        break;                    case R.id.navigation_item_my_photo_album:                        ARouter.getInstance().build("/face/googleCamera").navigation();                        break;                    case R.id.navigation_item_my_file:                        ARouter.getInstance().build("/face/CameraActivity2Face").navigation();//                        ARouter.getInstance().build("/other/imageEdit").navigation();//                        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE_SECURE);//                        Bundle bundle = new Bundle();//                        bundle.putInt(MediaStore.EXTRA_VIDEO_QUALITY, 0);//                        bundle.putString(MediaStore.EXTRA_OUTPUT, FileUtils.getCacheFilePath(mContext));//                        intent.putExtras(bundle);//                        startActivityForResult(intent, 900);                        break;                    case R.id.navigation_item_setting://                        ARouter.getInstance().build("/music/mainActivity").navigation();                        ARouter.getInstance().build("/from/MainActivity").navigation();                        break;                    case R.id.navigation_item_about:                        ARouter.getInstance().build("/music/playActivity").navigation();//                        ARouter.getInstance().build("/screenRecord/main").navigation();                        break;                    default:                }                item.setChecked(true);                mDrawerLayout.closeDrawers();                return true;            }        });    }    /**     * 切换框架 中的 布局内容     *     * @param absBaseFragment 框架     * @param tag             框架标题     */    private void switchToFragment(AbsBaseFragment absBaseFragment, String tag) {        getSupportFragmentManager().beginTransaction().replace(R.id.main_fragment, absBaseFragment).commit();        mToolbar.setTitle(tag);    }    @Override    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {        super.onActivityResult(requestCode, resultCode, data);    }}